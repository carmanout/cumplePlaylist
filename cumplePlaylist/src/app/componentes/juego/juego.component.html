<div *ngIf="!terminado" id="cuerpo">

    <ng-container *ngFor="let cancion of jsonData ; let i = index">

        <div *ngIf="i === preguntaActual" class="pregunta" id="{{i}}" class="pregunta" #preguntas @fade>
            <div class="visual">
                <h1>{{ cancion.titulo }}</h1>
                <h2>Artista: {{ cancion.artista }}</h2>

            </div>

            <div class="opciones">
                <h3>¿Quien se acuerda de ti por esta canción?</h3>
                <button *ngFor="let nombre of nombres" (click)="this.check(nombre, cancion.nombres.toString())">
                    {{nombre}}
                </button>
            </div>

            <div class="solucion" *ngIf="i === preguntaActual && completa" @fade>
                <div>
                    <h3 *ngIf="correcta" class="correcta">¡Has acertado!</h3>
                    <h3 *ngIf="!correcta" class="fallo">¡Fallaste!</h3>
                    <div *ngIf="cancion.nombres.length > 1">
                        <h3>
                            ¡<span *ngFor="let nombre of cancion.nombres; let i = index; let last = last">{{nombre}}{{last ? '' : (i < cancion.nombres.length - 2) ? ', ' : ' y también'}}
                            </span>
                            pensaron en ti con esta canción!</h3>
                    </div>
                    
                    <h3 *ngIf="cancion.nombres.length == 1">
                        ¡{{cancion.nombres[0]}} pensó en ti con esta canción!
                    </h3>
                </div>

                <button (click)="next()">Siguiente</button>
            </div>
        </div>
    </ng-container>
</div>

<div *ngIf="terminado" id="cuerpo">
    <div class="pregunta">
        <h2>¡Felicidades, has completado el juego!</h2>
        <p>Hemos disfrutado mucho recordando todas estas canciones que te representan. Esperamos que hayas disfrutado tanto como nosotros preparándolo para ti.</p>
        <p>¡Has acertado un {{porcentajePuntuacion()}}% de las resputestas!</p>
        <p>¡Sigue llenando tus días con música y buenos recuerdos! Nosotros, tus amigos y familiares, estamos aquí para compartir cada nota contigo. ¡Feliz cumpleaños, Jose!</p>
        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/7unabsQndNTngNKTZwI5HW?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
    </div>
</div>